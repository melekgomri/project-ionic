<ion-header>
  <ion-toolbar style="--background: #e64a19; color: #f2f2f7;">
    <ion-title>Carpoolers</ion-title>
    <ion-buttons slot="start">
      <ion-back-button style="color: #f2f2f7;"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>

  <form (ngSubmit)="submitReview()">
    <ion-item>
      <ion-label><strong>Carpooler: {{ covoitureur?.name }} {{ covoitureur?.lastname }}</strong></ion-label>
    </ion-item>
    <ion-item>
      <ion-label >Rating</ion-label>
      <div class="stars">
        <ion-icon *ngFor="let star of stars; let i = index" 
                  [name]="i < rating ? 'star' : 'star-outline'" 
                  (click)="setRating(i + 1)">
        </ion-icon>
      </div>
    </ion-item>

    <ion-item>
      <ion-label>Review</ion-label>
      <ion-input [(ngModel)]="reviewContent" name="reviewContent"></ion-input>
    </ion-item>

    <ion-button style="--background: #e64a19; color: #f2f2f7; height: 40px; width: 200px; margin-top: 10px; margin-left: 80px;"  type="submit">Submit</ion-button>
  </form>

  <div  *ngIf="carpoolerId" style="margin-left: 20px; margin-bottom: 50px;">
    <h2 style="font-size: 17px;">Reviews for Carpooler {{ covoitureur.name  }} {{ covoitureur.lastname  }}</h2>

    <!-- Display the count of reviews -->
    <p style="margin-left: 4px;">Total Reviews: {{ reviewCount }}</p>

    <!-- List of reviews -->
    <ion-list>
      <ion-item *ngFor="let review of displayedReviews">
        <ion-label>
          <h3>{{ review.auteur.name }} {{ review.auteur.lastname }}</h3>
          <p>{{ review.contenue }}</p>
          <p><strong>Rating: {{ review.note }} Stars</strong></p>
          <p>Posted on: {{ review.datePublication | date }}</p>
        </ion-label>
      </ion-item>
    </ion-list>
    <div style="height: 20px;"></div>
    <ion-text *ngIf="displayedReviews.length < reviews.length">
      <a (click)="loadMoreReviews()">View More</a>
    </ion-text>
  </div>

  <div *ngIf="!carpoolerId">
    <p>Invalid Carpooler ID</p>
  </div>
</ion-content>